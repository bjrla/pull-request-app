<div class="app-container">
  <header class="app-header">
    <!-- Easy Logon container for button and input -->
    <div class="easy-logon-container">
      <button
        (click)="startEasyLogon()"
        class="easy-logon-button"
        [disabled]="isLogonRunning"
      >
        {{ isLogonRunning ? "Running..." : "Easy Logon" }}
        <svg viewBox="0 0 16 16" class="easy-logon-icon">
          <path
            d="m 2 2.5 v 11 c 0 1.5 1.269531 1.492188 1.269531 1.492188 h 0.128907 c 0.246093 0.003906 0.488281 -0.050782 0.699218 -0.171876 l 9.796875 -5.597656 c 0.433594 -0.242187 0.65625 -0.734375 0.65625 -1.226562 c 0 -0.492188 -0.222656 -0.984375 -0.65625 -1.222656 l -9.796875 -5.597657 c -0.210937 -0.121093 -0.453125 -0.175781 -0.699218 -0.175781 h -0.128907 s -1.269531 0 -1.269531 1.5 z m 0 0"
            fill="currentColor"
          />
        </svg>
      </button>

      <!-- Input field below Easy Logon button -->
      <input
        type="text"
        class="easy-logon-input"
        maxlength="6"
        disabled
        placeholder="4A1137"
      />
    </div>

    <div class="header-content">
      <div class="header-left">
        <div class="logo">
          <svg viewBox="0 0 24 24" class="logo-icon">
            <path
              d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"
              stroke="currentColor"
              stroke-width="2"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </div>
        <div class="title-section">
          <h1 class="app-title">CPO Frontend Dashboard</h1>
          <span class="app-subtitle">Pull Request Management System</span>
        </div>
      </div>
      <div class="header-right">
        <nav class="nav-buttons">
          <button
            [class.active]="isActiveRoute('pull-requests')"
            (click)="navigateTo('pull-requests')"
            class="nav-button"
          >
            <svg viewBox="0 0 24 24" class="nav-icon">
              <path
                d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z"
                opacity="0"
              ></path>
              <path
                d="M12.7929,3.17156 C13.1834,2.78103 13.8166,2.78103 14.2071,3.17156 C14.5675615,3.53204 14.5952893,4.09926651 14.2902834,4.49156153 L14.2071,4.58577 L13.7929,4.99994 L16,4.99994 C17.597725,4.99994 18.903664,6.24885462 18.9949075,7.82366664 L19,7.99994 L19,15.1706 C20.1652,15.5825 21,16.6937 21,17.9999 C21,19.6568 19.6569,20.9999 18,20.9999 C16.3431,20.9999 15,19.6568 15,17.9999 C15,16.75901 15.753407,15.6941075 16.8277611,15.2375667 L17,15.1706 L17,7.99994 C17,7.48709929 16.613973,7.06443214 16.1166239,7.00666766 L16,6.99994 L13.7929,6.99994 L14.2072,7.41415 C14.5977,7.80468 14.5977,8.43784 14.2072,8.82837 C13.8466462,9.18885 13.2794651,9.21657923 12.8871224,8.91155769 L12.7929,8.82837 L10.6716,6.70705 C10.3111385,6.34656077 10.2834107,5.77933355 10.5884166,5.38703848 L10.6716,5.29283 L12.7929,3.17156 Z M6,2.99994 C7.65685,2.99994 9,4.34308 9,5.99994 C9,7.240849 8.24658398,8.30578855 7.1722376,8.76227298 L7,8.82923 L7,15.1706 C8.16519,15.5825 9,16.6937 9,17.9999 C9,19.6568 7.65685,20.9999 6,20.9999 C4.34315,20.9999 3,19.6568 3,17.9999 C3,16.75901 3.75341603,15.6941075 4.8277624,15.2375667 L5,15.1706 L5,8.82923 C3.83481,8.4174 3,7.30616 3,5.99994 C3,4.34308 4.34315,2.99994 6,2.99994 Z"
                fill="currentColor"
              ></path>
            </svg>
            Pull Requests
          </button>
          <button
            [class.active]="isActiveRoute('pipelines')"
            (click)="navigateTo('pipelines')"
            class="nav-button"
          >
            <svg viewBox="0 0 32 32" class="nav-icon">
              <path
                d="M2.401 24h-2.401v8h8v-2.401h-5.599zM30.667 0h-11.906c-0.896-0.005-1.729 0.443-2.229 1.188l-4.531 6.797h-10.667c-0.734 0-1.333 0.599-1.333 1.333v7.333l4.667 4.818 1.599-1.724 2 2-1.599 1.63 1.974 1.974 1.625-1.63 2 2.016-1.599 1.599 4.667 4.667h7.333c0.734 0 1.333-0.599 1.333-1.333v-10.667l6.813-4.531c0.75-0.5 1.193-1.344 1.188-2.24v-11.896c0-0.734-0.599-1.333-1.333-1.333zM24 12c-5.333 0-5.333-8 0-8s5.333 8 0 8z"
                fill="currentColor"
              ></path>
            </svg>
            <span class="nav-text">Pipelines</span>
            <span class="beta-label">BETA</span>
          </button>
          <button
            (click)="openManageProjectsModal()"
            class="nav-button secondary"
          >
            <svg viewBox="0 0 28 28" class="nav-icon">
              <path
                d="M19.9818 21.6364L21.7093 22.3948C22.0671 22.5518 22.4849 22.4657 22.7517 22.1799C23.9944 20.8492 24.9198 19.2536 25.4586 17.5131C25.5748 17.1376 25.441 16.7296 25.1251 16.4965L23.5988 15.3698C23.1628 15.0489 22.9 14.5403 22.9 13.9994C22.9 13.4586 23.1628 12.95 23.5978 12.6297L25.1228 11.5035C25.4386 11.2703 25.5723 10.8623 25.4561 10.487C24.9172 8.74611 23.9912 7.1504 22.7478 5.81991C22.4807 5.53405 22.0626 5.44818 21.7048 5.60568L19.9843 6.36294C19.769 6.45838 19.5385 6.507 19.3055 6.50663C18.4387 6.50572 17.7116 5.85221 17.617 4.98937L17.4079 3.11017C17.3643 2.71823 17.077 2.39734 16.6928 2.31149C15.8128 2.11485 14.9147 2.01047 14.0131 2.00006C13.0891 2.01071 12.19 2.11504 11.3089 2.31138C10.9245 2.39704 10.637 2.71803 10.5933 3.11017L10.3844 4.98794C10.3244 5.52527 10.0133 6.00264 9.54617 6.27415C9.07696 6.54881 8.50793 6.58168 8.01296 6.36404L6.29276 5.60691C5.93492 5.44941 5.51684 5.53528 5.24971 5.82114C4.00637 7.15163 3.08038 8.74734 2.54142 10.4882C2.42513 10.8638 2.55914 11.272 2.87529 11.5051L4.40162 12.6306C4.83721 12.9512 5.09414 13.4598 5.09414 14.0007C5.09414 14.5415 4.83721 15.0501 4.40219 15.3703L2.8749 16.4977C2.55922 16.7307 2.42533 17.1384 2.54122 17.5137C3.07924 19.2561 4.00474 20.8536 5.24806 22.1859C5.51493 22.4718 5.93281 22.558 6.29071 22.4009L8.01859 21.6424C8.51117 21.4269 9.07783 21.4586 9.54452 21.7281C10.0112 21.9976 10.3225 22.4731 10.3834 23.0093L10.5908 24.8855C10.6336 25.273 10.9148 25.5917 11.2933 25.682C13.0725 26.1061 14.9263 26.1061 16.7055 25.682C17.084 25.5917 17.3651 25.273 17.408 24.8855L17.6157 23.0066C17.675 22.4693 17.9729 21.9924 18.44 21.7219C18.9071 21.4515 19.4876 21.4197 19.9818 21.6364ZM14 18C11.7909 18 10 16.2091 10 14C10 11.7909 11.7909 10 14 10C16.2091 10 18 11.7909 18 14C18 16.2091 16.2091 18 14 18Z"
                fill="currentColor"
              ></path>
            </svg>
            Manage Projects
          </button>
        </nav>
      </div>
    </div>
  </header>

  <div
    class="easy-logon-console"
    *ngIf="latestLogonMessage"
    [ngClass]="'console-' + logonMessageType"
  >
    <div class="console-content">
      <span class="console-icon">
        <svg
          *ngIf="logonMessageType === 'info'"
          viewBox="0 0 24 24"
          class="console-svg"
        >
          <path
            d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"
            fill="currentColor"
          />
        </svg>
        <svg
          *ngIf="logonMessageType === 'stdout'"
          viewBox="0 0 24 24"
          class="console-svg"
        >
          <path
            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"
            fill="currentColor"
          />
        </svg>
        <svg
          *ngIf="logonMessageType === 'stderr'"
          viewBox="0 0 24 24"
          class="console-svg"
        >
          <path
            d="M13,13H11V7H13M11,15H13V17H11M15.73,3H8.27L3,8.27V15.73L8.27,21H15.73L21,15.73V8.27L15.73,3Z"
            fill="currentColor"
          />
        </svg>
        <svg
          *ngIf="logonMessageType === 'success'"
          viewBox="0 0 24 24"
          class="console-svg"
        >
          <path
            d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"
            fill="currentColor"
          />
        </svg>
        <svg
          *ngIf="logonMessageType === 'error'"
          viewBox="0 0 24 24"
          class="console-svg"
        >
          <path
            d="M13,13H11V7H13M11,15H13V17H11M15.73,3H8.27L3,8.27V15.73L8.27,21H15.73L21,15.73V8.27L15.73,3Z"
            fill="currentColor"
          />
        </svg>
      </span>
      <span class="console-label">Easy Logon:</span>
      <span class="console-message">{{ latestLogonMessage }}</span>
    </div>
    <button
      class="console-close"
      (click)="clearLogonMessage()"
      aria-label="Clear message"
    >
      <svg viewBox="0 0 24 24" class="close-icon">
        <path
          d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
          fill="currentColor"
        />
      </svg>
    </button>
  </div>

  <main class="app-content">
    <router-outlet></router-outlet>
  </main>

  <app-manage-projects-modal
    [isOpen]="isManageProjectsModalOpen"
    [currentProjects]="currentProjects"
    (closeModal)="closeManageProjectsModal()"
    (projectAdded)="onProjectAdded($event)"
    (projectRemoved)="onProjectRemoved($event)"
    (patUpdated)="onPATUpdated($event)"
    (projectsReordered)="onProjectsUpdated($event)"
  ></app-manage-projects-modal>
</div>
